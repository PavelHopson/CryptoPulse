# CryptoPulse 2077 ‚Äî –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–æ—Å—Ç–∞–≤ —Å–∞–π—Ç–∞, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –ø–ª–∞—Ç–µ–∂–Ω—ã–π –∫–æ–Ω—Ç—É—Ä –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

---

## 1) –ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞

### –ü—É–±–ª–∏—á–Ω–∞—è –∑–æ–Ω–∞
- `/auth` ‚Äî –≤—Ö–æ–¥ (email/password + OAuth)

### –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –∑–æ–Ω–∞
- `/` ‚Äî –î–∞—à–±–æ—Ä–¥ —Ä—ã–Ω–∫–∞
- `/favorites` ‚Äî –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
- `/comparison` ‚Äî –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–Ω–µ—Ç
- `/portfolio` ‚Äî –ü–æ—Ä—Ç—Ñ–µ–ª—å (Pro+)
- `/pricing` ‚Äî –¢–∞—Ä–∏—Ñ—ã –∏ –∞–ø–≥—Ä–µ–π–¥
- `/billing` ‚Äî –ë–∏–ª–ª–∏–Ω–≥ –∏ –ø–æ–¥–ø–∏—Å–∫–∞

---

## 2) –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

| –†–æ–ª—å | –ò–∑–±—Ä–∞–Ω–Ω–æ–µ | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ | –ü–æ—Ä—Ç—Ñ–µ–ª—å | Alerts | –ë–∏–ª–ª–∏–Ω–≥ |
|---|---:|---:|---|---|---|
| Free | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Ñ–ª–∞–≥–∞–º–∏ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Ñ–ª–∞–≥–∞–º–∏ | –ù–µ—Ç | –ù–µ—Ç | –î–∞ |
| Pro | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã | –î–∞ | –î–∞ | –î–∞ |
| Enterprise | –ë–µ–∑–ª–∏–º–∏—Ç/–∫–∞—Å—Ç–æ–º | –ë–µ–∑–ª–∏–º–∏—Ç/–∫–∞—Å—Ç–æ–º | –î–∞ | –î–∞ | –î–∞ |

–õ–∏–º–∏—Ç—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `feature_flags`.

---

## 3) –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

### –î–∞—à–±–æ—Ä–¥
- —Ç–æ–ø–æ–≤—ã–µ –∞–∫—Ç–∏–≤—ã
- —Ü–µ–Ω–∞, 24h %, –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è, –æ–±—ä–µ–º
- 7d sparkline
- —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∞–≤—Ç–æ-refresh

### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ
- –ª–∏–º–∏—Ç—ã –ø–æ —Ä–æ–ª–∏
- realtime-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- graceful downgrade (–ª–∏—à–Ω–∏–µ –∑–∞–ø–∏—Å–∏ ‚Üí inactive)

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
- –ª–∏–º–∏—Ç—ã –∏–∑ feature flags
- –±–∞–∑–∞ –¥–ª—è –º—É–ª—å—Ç–∏–≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### –ü–æ—Ä—Ç—Ñ–µ–ª—å
- –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ Pro+
- –±–∞–∑–∞ –¥–ª—è ROI/P&L –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –¢–∞—Ä–∏—Ñ—ã
- Pro / Enterprise
- –∑–∞–ø—É—Å–∫ Stripe checkout
- —Å–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–∞ –∞–ø–≥—Ä–µ–π–¥

### –ë–∏–ª–ª–∏–Ω–≥
- —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
- next renewal
- trial countdown
- cancel at period end
- –∏—Å—Ç–æ—Ä–∏—è –∏–Ω–≤–æ–π—Å–æ–≤

---

## 4) –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–æ–¥–ø–∏—Å–∫–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç checkout.
2. Stripe —Å–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É.
3. Webhook –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è.
4. –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç:
   - `subscriptions`
   - `profiles.role`
   - `subscription_events` (audit)
5. UI-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–æ–ª–∏/—Ñ–ª–∞–≥–∞–º.

---

## 5) –ö–ª—é—á–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã

- `profiles` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å + —Ä–æ–ª—å
- `subscriptions` ‚Äî —Å—Ç–∞—Ç—É—Å –∏ –ø–µ—Ä–∏–æ–¥—ã –ø–æ–¥–ø–∏—Å–∫–∏
- `subscription_events` ‚Äî –∞—É–¥–∏—Ç —Å–æ–±—ã—Ç–∏–π Stripe
- `feature_flags` ‚Äî –ª–∏–º–∏—Ç—ã –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π
- `favorites` ‚Äî watchlist –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `comparisons` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- `portfolios` ‚Äî –ø–æ—Ä—Ç—Ñ–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `alerts` ‚Äî —Ü–µ–Ω–æ–≤—ã–µ –∞–ª–µ—Ä—Ç—ã
- `alert_jobs` ‚Äî –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –∞–ª–µ—Ä—Ç–æ–≤
- `usage_events` ‚Äî –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## 6) –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- RLS –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- webhook signature validation
- —Å–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –≤ env/edge

### –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
- structured logging
- —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- health-check endpoint + scheduled checks
- retries –∏ failure hooks

---

## 7) Growth –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

- —Å–±–æ—Ä usage —Å–æ–±—ã—Ç–∏–π
- MRR snapshot
- churn view –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
- —Ç—Ä–∏–≥–≥–µ—Ä—ã –∞–ø–≥—Ä–µ–π–¥–∞ –≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö

---

## 8) –ò—Ç–æ–≥

CryptoPulse ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, –∞ SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –≥–æ—Ç–æ–≤—ã–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º –¥–ª—è –∑–∞–ø—É—Å–∫–∞, –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.
# üåå CryptoPulse 2077 ‚Äî Full Product Showcase

This document presents the **complete site map, user flows, business logic, and operational architecture** for CryptoPulse 2077.

---

## 1) üß≠ Full Site Map

### Public/Auth
- `/auth` ‚Äî Sign in / OAuth entry point

### Protected App
- `/` ‚Äî **Dashboard (Market Grid)**
- `/favorites` ‚Äî **Signal Vault (Favorites)**
- `/comparison` ‚Äî **Compare Core**
- `/portfolio` ‚Äî **Portfolio OS** (Pro+)
- `/pricing` ‚Äî **Upgrade Matrix**
- `/billing` ‚Äî **Billing Control Deck**

---

## 2) üë§ Roles & Access Model

| Role | Favorites | Comparison | Portfolio | Alerts | Billing |
|---|---:|---:|---|---|---|
| Free | Limited (flag-based) | Limited (flag-based) | ‚ùå | ‚ùå | ‚úÖ |
| Pro | Higher limits | Higher limits | ‚úÖ | ‚úÖ | ‚úÖ |
| Enterprise | Unlimited/Custom | Unlimited/Custom | ‚úÖ | ‚úÖ | ‚úÖ |

All limits are controlled through `feature_flags` (DB), enabling runtime changes without redeploy.

---

## 3) üñ•Ô∏è Feature Walkthrough

## Dashboard (Market Grid)
- Top 20 market assets
- Price, 24h change, market cap, volume
- 7d sparkline chart per asset
- Auto refresh cycle for near-realtime UX

## Signal Vault (Favorites)
- Add / remove favorites
- Limits validated by plan
- Realtime table sync
- Graceful downgrade behavior (overflow favorites become inactive)

## Compare Core
- Plan-aware comparison capacity from feature flags
- Designed for multi-chart strategy overlays

## Portfolio OS
- Role-gated feature (Pro+)
- Intended for P/L, ROI, and allocation insights
- Paywall tracking hooks included

## Upgrade Matrix (Pricing)
- Clear plan cards (Pro / Enterprise)
- Stripe checkout initiation
- Conversion tracking events

## Billing Control Deck
- Current plan + status
- Next renewal date
- Trial countdown
- Cancel-at-period-end action
- Invoice history stream

---

## 4) üí≥ Subscription & Billing Lifecycle

1. User starts checkout from Pricing.
2. Stripe creates subscription.
3. Webhook receives lifecycle events.
4. System updates:
   - `subscriptions`
   - `profiles.role`
   - `subscription_events` (audit trail)
5. UI gates and limits adapt automatically by role/flags.

---

## 5) ‚öôÔ∏è Data Model (Business-Critical Tables)

- `profiles` ‚Äî identity + role
- `subscriptions` ‚Äî billing status and lifecycle dates
- `subscription_events` ‚Äî immutable billing audit trail
- `feature_flags` ‚Äî limits / capability toggles per role
- `favorites` ‚Äî user watchlist (+ `active` for downgrade UX)
- `comparisons` ‚Äî saved comparison sets
- `portfolios` ‚Äî holdings for portfolio analytics
- `alerts` ‚Äî user price alerts
- `alert_jobs` ‚Äî queued job processing with retry/backoff
- `usage_events` ‚Äî product analytics event stream

---

## 6) üîí Security, Reliability, and Operations

### Security
- RLS isolation (`auth.uid()` ownership checks)
- Sensitive secrets in env/edge only
- Webhook signature verification

### Reliability
- Structured logging (JSON)
- Centralized app error handling
- Stripe webhook retry and failure notification hooks
- Health-check endpoint + scheduled ping workflow

### Scale Direction
- Background job queue for alerts (batch + retries)
- Role/feature abstraction for zero-downtime plan tuning
- Service/domain separation for clean growth

---

## 7) üìà Growth & Data Strategy Layer

- Usage event tracking for core feature adoption
- Revenue snapshot view (MRR baseline)
- Churn monthly view from subscription events
- Upgrade trigger telemetry in product touchpoints

This enables transition from ‚Äúshipping features‚Äù to **measuring business outcomes**.

---

## 8) üß™ Production Readiness Checklist

- [x] Strict TypeScript app architecture
- [x] Auth + protected routes + roles
- [x] Stripe-to-role synchronization path
- [x] RLS-enabled user data isolation
- [x] Observability primitives in place
- [x] Background job baseline for alerts
- [x] Billing UI and subscription status visibility
- [x] Growth metrics foundation

---

## 9) üéØ Why this is startup-ready

CryptoPulse already includes the foundations most teams add too late:
- separation of business logic from infrastructure,
- monetization lifecycle support,
- observability and operational safety rails,
- data instrumentation for retention and revenue insights.

It is now positioned not just as an app, but as a **scalable SaaS business platform**.
